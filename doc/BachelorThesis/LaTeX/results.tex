
\chapter{Results}

This section summarizes the results which are the \lsystem processing library and the web user interface.
At the end of this chapter are examples of rendered images of \lsystems produced by created program.


\section{\lsystem processing library}

Originally, the aim of this project was to create an online \lsystem processing interface.
However, during the work the \lsystem processing library showed to be very universal and robust.
It is written in the .NET framework and thanks to the Mono project it is multiplatform and it can be used in other projects too.

The library is unique by its component-based processing of \lsystems.
Components are connected to larger groups which allows to extend the system.
The connections are defined by input and can be redefined easily.
The component system is even capable to process other things than \lsystems but it is limited by input syntax which is specialized for \lsystems.

Components can be implemented by users and configured by the input.
Example of implementation of a component can be found in appendix \ref{chap:compImpl}.
The library provides a many utilities for component implementation which makes it easier.

The new syntax for \lsystems was created and it is relatively simple to read and understand.
The syntax parser and compilers are extensible, thus syntax can be improved or extended with minimal effort.

The example of processing of input with the library is in appendix \ref{chap:libUsage}.


\subsection{Unit tests}

The functionality of the \lsystem processing library is tested by nearly 200 unit tests.
The tested parts are parsing, compilation and evaluation, processing of the \lsystems and also individual components like rewriting correctness of the symbol rewriter.

\autoref{tab:testCoverage} shows test coverage of the main projects.
Note that some parts are very hard to test (for example \lsystem renderers) thus the are not covered.

\begin{table}[h]
	\centering
	\begin{tabular}{l l}
   		\toprule
   		Project & Coverage\\
   		\midrule
		Malsys & 65\% \\ \hline
		Malsys.Ast & 63\% \\ \hline
		Malsys.Common & 42\% \\
		\bottomrule
	\end{tabular}
	\caption{Unit tests code coverage of main projects}
	\label{tab:testCoverage}
\end{table}


\clearpage % fmt
\section{Web user interface}

\begin{wrapfigure}{r}{0.4\textwidth}
	\includegraphics[width=\linewidth]{malsys_cz}
	\caption[QR code for http://malsys.cz]{\url{http://malsys.cz}}
	\label{fig:malsysQr}
\end{wrapfigure}

The web user interface was deployed and it is accessible at \url{http://malsys.cz}.
The main function of the web user interface is to process \lsystems (detailed instructions can be found in appendix \ref{chap:userDoc}).
The web site includes the \lsystem gallery and the help section.

Any user can register and gain some advantages.
Registered users can save and publish their \lsystems to the public gallery and they have longer time limit for processing of \lsystems.

Web page is displayed correctly in the most common web browsers, namely: Google Chrome, Opera, Firefox, Internet Explorer and Safari.
It is also possible to browse it on smart phones or tablets.
\autoref{fig:galleryInDevices} shows print-screens of the first page of the gallery on various different operating systems.

If the browser window is wider than 1900 px the layout of the \lsystem process page splits into two columns to allow to see the source code and the results simultaneously.
This feature is done purely in CSS 3.

The web page is supports pinning to the Windows taskbar (\autoref{fig:pinIe}). 

\begin{figure}[h]
	\centering
	\subfloat{\includegraphics[scale=0.54]{JumpList}} ~
	\subfloat{\includegraphics[scale=0.7]{PinnedIeHeader}}
	\caption{A Jump-list of a pinned site and the header of an opened Internet Explorer 9 using a pinned shortcut}
	\label{fig:galleryInDevices}
\end{figure}


\begin{figure}[p]
	\centering
	\subfloat[Windows 7 (Google Chrome)]{\includegraphics[width=\linewidth]{GalleryInChrome}}
	\\
	\subfloat[Android ICS (default browser)]{\includegraphics[height=7cm]{GalleryOnAndroid}} ~
	\subfloat[Windows Phone (IE9 mobile)]{\includegraphics[height=7cm]{GalleryOnWindowsPhone}} ~
	\subfloat[Amazon Kindle 3]{\includegraphics[height=7cm]{GalleryOnKindle}}
	\caption{The first page of the gallery displayed on various operating systems}
	\label{fig:pinIe}
	\nomenclature{IE}{Internet Explorer}
\end{figure}


\subsection{Visitors and traffic}

The web was officially released on 15 April 2012.
Two days later notifications on Twitter and Facebook were also posted.
On this day the number of visitors peeked at 142, but the most of these just checked the gallery and the next day the messages on the social networks were lost.

About a week after the initial release, a short newsflash was posted on the Czech server \url{http://root.cz} which attracted 255 visitors that day.
But visitors from root.cz were not just looking at the gallery.
In contrast to the visitors from the social network, users from root.cz started to experiment with \lsystems.
This was probably because of the fact that root.cz is a site about computer technologies, software and programming, and thus users understood \lsystems better.

At the end of May, one and half months after its initial release, malsys.cz has been seen by over 1000 unique visitors and these visitors browsed over 9000 pages.
Till the end of May unregistered users processed over 2000 \lsystems.


\section{Some solution statistics}

\autoref{tbl:stats} shows number of lines of code based on file types.
Listed numbers do not include generated code (if not otherwise stated).
Also note that the help pages with \emph{predefined stuff} on the web are generated dynamically and thus their content is not included in the statistics of total line count.


\begin{table}[H]
	\centering
	\begin{tabular}{p{65pt} c c p{200pt}}
   		\toprule
   		Extension & Type & Line count & Comment\\
   		\midrule
		.cs & C\# & > 30 000 &  \\ \hline
		.fs, .fsy, .fls & F\# & > 1 000 & F\# files together with lexer and parser definitions \\ \hline
		.cshtml & Razor & > 10 000 & views of the razor view engine\\ \hline
		.generated.cs, .designer.cs & C\# & > 5 000 & automatically generated files \\
		\bottomrule
	\end{tabular}
	\caption{Number of lines of code written by hand (if not otherwise stated) based on file types}
	\label{tbl:stats}
\end{table}



\section{Showcase of \lsystems}

The most \lsystems are used in this thesis as figures illustrating described themes.
In this section are images of some more \lsystems.

\begin{figure}[H]
	\subfloat{\includegraphics[width=0.49\linewidth]{Tsquare}}
	\hfill
	\subfloat{\includegraphics[width=0.49\linewidth]{Tsquare3D}}
	\caption{T-square fractal (left) and its generalization to 3D with pyramids instead of squares (right)}
	\label{fig:rsltTsquares}
\end{figure}

\begin{figure}[p]
	\centering
	\includegraphics[width=\linewidth]{HexaGosper}
	\caption{Hexagonal Gosper curve}
	\label{fig:rsltHexaGosper}
\end{figure}

\newsavebox{\lstBoxGosper}
\begin{lrbox}{\lstBoxGosper}
\consolas
\footnotesize
\begin{lstlisting}
            ________          
            \       \         
  ________   \____   \        
  \       \      /   /        
   \____   \____/   /   ____  
       /            \   \   \ 
  ____/   ________   \   \   \
 /        \       \   \  /    
/   ____   \____   \   \/     
\   \   \      /   /          
 \   \   \____/   /   ____    
  \  /            \  /   /    
   \/   ________   \/   /     
        \       \      /      
         \____   \____/       
             /                
        ____/                 
\end{lstlisting}
\end{lrbox}

\begin{figure}[p]
	\subfloat{
		\minipage{0.47\linewidth}\noindent
			\includegraphics[width=\linewidth]{HexaGosperFilled}
		\endminipage
	}
	\hfill
	\subfloat{
		\usebox{\lstBoxGosper}
	}
	\caption{Hexagonal Gosper curve as polygon (left) and as ASCII art (right)}
\end{figure}

\begin{figure}[p]
	\centering
	\includegraphics[width=\linewidth]{IslandsAndLakes}
	\caption{Islands and lakes}
	\label{fig:rsltIslandsLakes}
\end{figure}

\begin{figure}[p]
	\subfloat{\includegraphics[width=0.49\linewidth]{SierpinskiTriangle}}
	\hfill
	\subfloat{\includegraphics[width=0.49\linewidth]{SierpinskiTriangleI}}
	\caption{Basic (left) and inverted (right) Sierpinski triangles}
	\label{fig:rsltSierpinski}
\end{figure}

\begin{figure}[p]
	\centering
	\includegraphics[width=\linewidth]{PenroseTiling}
	\caption{Penrose tiling}
	\label{fig:rsltPenrose}
\end{figure}

\begin{figure}[p]
	\subfloat{\includegraphics[width=0.40\linewidth]{Circles}}
	\hfill
	\subfloat{\includegraphics[width=0.58\linewidth]{Circles3D}}
	\caption{Circles (left) and its generalized version in 3D (right)}
	\label{fig:rsltCircles}
\end{figure}

\begin{figure}[p]
	\centering
	\includegraphics[width=\linewidth]{LilacHuge}
	\caption{Lilac panicle}
	\label{fig:rsltLilac}
\end{figure}	

\begin{figure}[p]
	\centering
	\includegraphics[width=\linewidth]{Hilbert3D}
	\caption{Hilbert curve 3D}
	\label{fig:rsltHilbert}
\end{figure}

\begin{figure}[p]
	\subfloat{\label{fig:rsltDekkingsChurch}\includegraphics[width=0.45\linewidth]{DekkingsChurch}}
	\hfill
	\subfloat{\includegraphics[width=0.5\linewidth]{HilbertCurve}}
	\caption{Dekking's chirch (left) and Hilbert curve (right)}
\end{figure}

\begin{figure}[p]
	\centering
	\includegraphics[width=\linewidth]{SunFlowerHuge}
	\caption{Sunflower}
	\label{fig:rsltSunflower}
\end{figure}

\begin{figure}[p]
	\subfloat{\label{fig:rsltPlant1}\includegraphics[width=0.28\linewidth]{Plant1}}
	\hfill
	\subfloat{\includegraphics[width=0.36\linewidth]{Dandelion}}
	\hfill
	\subfloat{\includegraphics[width=0.25\linewidth]{Plant2}}
	\caption{Models of plant-like structures with withered dandelion in the middle}
\end{figure}
























