@model Malsys.Processing.OutputFile


@{
var fi = new FileInfo(Model.FilePath);
	if (!fi.Exists) {
		return;
	}

	<p>
		L-system: <b><abbr title="Generated by `@Model.Source`">@Model.LsystemName</abbr></b>
		@Html.ActionLink(string.Format("download [{0:0.0} kB]", fi.Length / 1024f), "DownloadResult", new { FileName = fi.Name })
	</p>


	if (fi.Extension == ".txt") {
		using (var sr = fi.OpenText()) {
			var buff = new char[1001];
			int readed = sr.ReadBlock(buff, 0, buff.Length);
			string strOut = new string(buff, 0, Math.Min(readed, 1000));

			if (readed > 1000) {
				<p class="outputTruncated">(showing first 1000 characters)</p>
			}

			<pre>@strOut</pre>
		}
	}
	else if (fi.Extension == ".svg" || fi.Extension == ".svgz") {
		if (fi.Length > 1024 * 512) {
			<p class="outputTruncated">SVG image is not shown directly (it is greater than 0.5 MB)</p>
		}
		else {
			<div class="scroll_box">
				<img src="/ProcessLsystem/DownloadResult?FileName=@fi.Name&download=false" alt="process result" />
			</div>
		}
	}

}